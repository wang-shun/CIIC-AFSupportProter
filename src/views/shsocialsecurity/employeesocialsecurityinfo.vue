<template>
  <div class="smList">
    <Collapse v-model="collapseInfo">
      <Panel name="1">
        客户基本信息
        <div slot="content">
          <Form :label-width=120>
            <Row class="mt20" type="flex" justify="start">
              <Col :sm="{span:22}" :md="{span: 12}" :lg="{span: 8}">
                <Form-item label="客户编号：">
                  <label>{{data.customer.code}}</label>
                </Form-item>
              </Col>
              <Col :sm="{span:22}" :md="{span: 12}" :lg="{span: 8}">
                <Form-item label="客户名称：">
                  <label>{{data.customer.name}}</label>
                </Form-item>
              </Col>
              <Col :sm="{span:22}" :md="{span: 12}" :lg="{span: 8}">
                <Form-item label="服务中心：">
                  <label>{{data.customer.customerServicerCenter}}</label>
                </Form-item>
              </Col>
              <Col :sm="{span:22}" :md="{span: 12}" :lg="{span: 8}">
                <Form-item label="客服经理：">
                  <label>{{data.customer.customerServicer}}</label>
                </Form-item>
              </Col>
            </Row>
          </Form>
        </div>
      </Panel>
      <Panel name="2">
        雇员信息
        <div slot="content">
          <Form :label-width=120>
            <Row class="mt20" type="flex" justify="start">
              <Col :sm="{span:22}" :md="{span: 12}" :lg="{span: 8}">
                <Form-item label="雇员编号：">
                  <label>{{data.employee.code}}</label>
                </Form-item>
              </Col>
              <Col :sm="{span:22}" :md="{span: 12}" :lg="{span: 8}">
                <Form-item label="雇员姓名：">
                  <label>{{data.employee.name}}</label>
                </Form-item>
              </Col>
              <Col :sm="{span:22}" :md="{span: 12}" :lg="{span: 8}">
                <Form-item label="证件号码：">
                  <label>{{data.employee.idNo}}</label>
                </Form-item>
              </Col>
              <Col :sm="{span:22}" :md="{span: 12}" :lg="{span: 8}">
                <Form-item label="入职日期：">
                  <label>{{data.employee.checkInTime}}</label>
                </Form-item>
              </Col>
              <Col :sm="{span:22}" :md="{span: 12}" :lg="{span: 8}">
                <Form-item label="社保序号：">
                  <label>{{data.employee.socialSecurityNo}}</label>
                </Form-item>
              </Col>
              <Col :sm="{span:22}" :md="{span: 12}" :lg="{span: 8}">
                <Form-item label="学历：">
                  <label>{{data.employee.education}}</label>
                </Form-item>
              </Col>
              <Col :sm="{span:22}" :md="{span: 12}" :lg="{span: 8}">
                <Form-item label="企业社保账户：">
                  <label>{{data.employee.socialSecurityCompanyAcount}}</label>
                </Form-item>
              </Col>
              <Col :sm="{span:22}" :md="{span: 12}" :lg="{span: 8}">
                <Form-item label="人员分类：">
                  <label>{{data.employee.personType}}</label>
                </Form-item>
              </Col>
              <Col :sm="{span:22}" :md="{span: 12}" :lg="{span: 8}">
                <Form-item label="离职日期：">
                  <label>{{data.employee.checkOutTime}}</label>
                </Form-item>
              </Col>
            </Row>
          </Form>
        </div>
      </Panel>
      <Panel name="3">
        社保汇缴信息
        <div slot="content">
          <Form :label-width=120>
            <Row class="mt20" type="flex" justify="start">
              <Col :sm="{span:22}" :md="{span: 12}" :lg="{span: 8}">
                <Form-item label="社保状态：">
                  <label>{{data.ssinfo.state}}</label>
                </Form-item>
              </Col>
              <Col :sm="{span:22}" :md="{span: 12}" :lg="{span: 8}">
                <Form-item label="社保缴费基数：">
                  <label>{{data.ssinfo.payBasePrice}}</label>
                </Form-item>
              </Col>
              <Col :sm="{span:22}" :md="{span: 12}" :lg="{span: 8}">
                <Form-item label="社保起缴月份：">
                  <label>{{data.ssinfo.payStartMonth}}</label>
                </Form-item>
              </Col>
              <Col :sm="{span:22}" :md="{span: 12}" :lg="{span: 8}">
                <Form-item label="办理月份：">
                  <label>{{data.ssinfo.doMonth}}</label>
                </Form-item>
              </Col>
            </Row>
            <Row>
              <Col :sm="{span: 14}">
                <Table width="651" border :columns="socialSecurityInfoListColumns" :data="data.socialSecurityInfoListData"></Table>
              </Col>
            </Row>
          </Form>
        </div>
      </Panel>
      <Panel name="4">
        变动历史
        <div slot="content">
          <Form :label-width=100>
            <Row class="mt20">
              <Col :sm="{span: 14}">
                <Table width="651" border :columns="changeListColumns" :data="data.changeListData"></Table>
              </Col>
            </Row>
          </Form>
        </div>
      </Panel>
    </Collapse>
    <Row class="mt20">
      <Col :sm="{span: 24}" class="tr">
        <Button type="warning" @click="goBack">返回</Button>
      </Col>
    </Row>
  </div>
</template>
<script>
  import {mapState, mapGetters, mapActions} from 'vuex'
  import EventTypes from '../../store/EventTypes'

  export default {
    data() {
      return {
        collapseInfo: [1, 2, 3, 4], //展开栏
        socialSecurityInfoListColumns: [
          {
            title: '变更类型', key: 'changeType', align: 'center', width: 162,
            render: (h, params) => {
              return h('div', {style: {textAlign: 'left'}}, [
                h('span', params.row.changeType),
              ]);
            }
          },
          {
            title: '基数', key: 'base', align: 'center', width: 162,
            render: (h, params) => {
              return h('div', {style: {textAlign: 'right'}}, [
                h('span', params.row.base),
              ]);
            }
          },
          {
            title: '起缴年月', key: 'startTime', align: 'center', width: 162,
            render: (h, params) => {
              return h('div', {style: {textAlign: 'right'}}, [
                h('span', params.row.startTime),
              ]);
            }
          },
          {
            title: '截至年月', key: 'endTime', align: 'center', width: 164,
            render: (h, params) => {
              return h('div', {style: {textAlign: 'right'}}, [
                h('span', params.row.endTime),
              ]);
            }
          }
        ],

        changeListColumns: [
          {
            title: '任务单编号', key: 'tid', align: 'center', width: 120,
            render: (h, params) => {
              return h('div', {style: {textAlign: 'left'}}, [
                h('a', {
                  on: {
                    click: () => {
                      this.$router.push({
                        name: 'companysocialsecuritynew',
                        query: {operatorType: params.index.toString(), sourceFrom: 'search'}
                      });
                    }
                  }
                }, params.row.tid)
              ]);
            }
          },
          {
            title: '办理方式', key: 'doMetod', align: 'center', width: 100,
            render: (h, params) => {
              return h('div', {style: {textAlign: 'left'}}, [
                h('span', params.row.doMetod),
              ]);
            }
          },
          {
            title: '变更内容', key: 'changeContent', align: 'center', width: 95,
            render: (h, params) => {
              return h('div', {style: {textAlign: 'left'}}, [
                h('span', params.row.changeContent),
              ]);
            }
          },
          {
            title: '任务发起人', key: 'creator', align: 'center', width: 105,
            render: (h, params) => {
              return h('div', {style: {textAlign: 'left'}}, [
                h('span', params.row.creator),
              ]);
            }
          },
          {
            title: '任务发起日期', key: 'startTime', align: 'center', width: 120,
            render: (h, params) => {
              return h('div', {style: {textAlign: 'left'}}, [
                h('span', params.row.startTime),
              ]);
            }
          },
          {
            title: '办理结果', key: 'result', align: 'center', width: 110,
            render: (h, params) => {
              return h('div', {style: {textAlign: 'left'}}, [
                h('span', params.row.result),
              ]);
            }
          }
        ]
      }
    },
    async mounted() {
      await this[EventTypes.EMPLOYEESOCIALSECURITYINFO]()
    },
    computed: {
      ...mapState('employeeSocialSecurityInfo', {
        data: state => state.data,
      })
    },
    methods: {
      ...mapActions('employeeSocialSecurityInfo', [EventTypes.EMPLOYEESOCIALSECURITYINFO]),
      goBack() {
        this.$router.push({name: 'employeesocialsecuritysearch'});
      }
    }
  }
</script>
